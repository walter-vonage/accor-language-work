"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EventFactory = void 0;
const neruEvent_js_1 = require("./neruEvent.js");
const neruEventSourceTypes_js_1 = require("./neruEventSourceTypes.js");
const neruEventTypes_js_1 = require("./neruEventTypes.js");
class EventFactory {
    constructor(session) {
        this.session = session;
    }
    createEvent(eventName, details) {
        if (eventName == neruEventTypes_js_1.NeruEventTypes.SESSION_CREATED) {
            const event = new neruEvent_js_1.NeruEvent();
            event.event_type = neruEventTypes_js_1.NeruEventTypes.SESSION_CREATED;
            event.source_type = neruEventSourceTypes_js_1.NeruEventSourceTypes.INSTANCE;
            event.details = details;
            this.setCommonFields(event);
            return event;
        }
        throw new Error('Event type not supported: ' + eventName);
    }
    setCommonFields(event) {
        event.timestamp = this.session.bridge.isoDate();
        event.id = this.session.bridge.uuid();
        event.source_id = this.session.config.instanceServiceName;
        event.api_account_id = this.session.config.apiAccountId;
        event.api_application_id = this.session.config.apiApplicationId;
        event.session_id = this.session.id;
        event.instance_id = this.session.config.instanceId;
    }
}
exports.EventFactory = EventFactory;
//# sourceMappingURL=eventFactory.js.map