"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EventFactory = void 0;
const vcrEvent_js_1 = require("./contracts/vcrEvent.js");
const vcrEventSourceType_js_1 = require("./enums/vcrEventSourceType.js");
const vcrEventType_js_1 = require("./enums/vcrEventType.js");
class EventFactory {
    constructor(session) {
        this.session = session;
        this.bridge = session.bridge;
    }
    createEvent(eventName, details) {
        if (eventName == vcrEventType_js_1.VCR_EVENT_TYPE.SESSION_CREATED) {
            const event = new vcrEvent_js_1.VCREvent();
            event.event_type = vcrEventType_js_1.VCR_EVENT_TYPE.SESSION_CREATED;
            event.source_type = vcrEventSourceType_js_1.VCR_EVENT_SOURCE_TYPE.INSTANCE;
            event.details = details;
            this.setCommonFields(event);
            return event;
        }
        throw this.bridge.createSdkError("Event type not supported: " + eventName);
    }
    setCommonFields(event) {
        event.timestamp = this.session.bridge.isoDate();
        event.id = this.session.bridge.uuid();
        event.source_id = this.session.config.instanceServiceName;
        event.api_account_id = this.session.config.apiAccountId;
        event.api_application_id = this.session.config.apiApplicationId;
        event.session_id = this.session.id;
        event.instance_id = this.session.config.instanceId;
    }
}
exports.EventFactory = EventFactory;
//# sourceMappingURL=eventFactory.js.map